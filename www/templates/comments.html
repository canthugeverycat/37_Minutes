<ion-view ng-controller="CommentsController">

	<!-- Header -->

	<ion-header-bar align-title="left" class="bar-calm has-tabs-top">
		<a class="button backBtn button-icon ion-android-arrow-back" ng-click="$root.goBack()"></a>
		<h1 class="title light">Comments </h1>
	</ion-header-bar>

	<!-- Tabs -->

	<div class="tabs-striped tabs-top tabs-background-light tabs-color-grey">

		<div class="tabs">

			<a class="tab-item active" href="#/polls">
				<i class="material-icons">textsms</i>
			</a>
	
			<a class="tab-item" href="#/notifications">
				<i class="material-icons">notifications_active</i>
			</a>
		
			<a class="tab-item" href="#/friends">
				<i class="material-icons">group</i>
			</a>
		
			<a class="tab-item" href="#/profile">
				<i class="material-icons">person</i>
			</a>
		
			<a class="tab-item" href="#/settings">
				<i class="material-icons">settings</i>
			</a>

		</div>
	</div>

<ion-content class="commentsContent has-header has-tabs-top">

	<!-- Without comments -->
	<div class="noContent" ng-if="$root.data.pollComments.length === 0">
		<i class="material-icons noContentIcon">speaker_notes</i>
		<p class="noContentTitle">No comments</p>
		<p class="noContentSubtitle">Be the first to comment on this poll</p>
	</div>

	<p class="commentsOnPoll" ng-if="$root.data.pollComments.length > 0">COMMENTS ON {{$root.data.commentsTitle}}</p>

	<div class="list commentsContainer" ng-if="$root.data.pollComments.length > 0">

		<!-- Negative comment -->
		<div class="item item-avatar" ng-repeat="comment in $root.data.pollComments track by $index" ng-class="{'new-comment-animate':comment.time.split(' ')[1] === 'sec' && $index === 0}">
			<img style="background:url({{comment.userImage}}) no-repeat center;background-size:cover;">
			<h2 class="userName">{{comment.userName}}</h2>
			<p class="commentTime">{{comment.time.split(' ')[1] === 'sec' ? 'Just now' : comment.time}}</p>
			<p class="comment">{{comment.comment}}</p>
			<img class="noIcon" src="img/no.png" ng-if="comment.userVotedNo === 1">
			<img class="yesIcon" src="img/yes.png" ng-if="comment.userVotedYes === 1">
		</div>
	</div>

</ion-content>

<ion-footer-bar class="bar-stable commentsFooter">
  <input class="enterComment" type="text" ng-model="$root.inputs.newComment" placeholder="Enter your comment" ng-enter="leaveComment($root.data.poll.questionId)" autofocus>
 <!-- Send msg button --> 
  <i class="material-icons enterIcon" ng-click="leaveComment($root.data.poll.questionId)">check</i>
</ion-footer-bar>

</ion-view>