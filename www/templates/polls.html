<ion-view ng-controller='PollsController'>

	<!-- Header -->

	<ion-header-bar align-title="left" class="bar-calm has-tabs-top">
		<button class="button backBtn button-clear button-light button-icon ion-android-arrow-back"></button>
		<h1 class="title light">Polls</h1>
	</ion-header-bar>

	<!-- Tabs -->

	<div class="tabs-striped tabs-top tabs-background-light tabs-color-grey">

		<div class="tabs">

			<a class="tab-item active" href="#/polls">
				<i class="material-icons">textsms</i>
			</a>
	
			<a class="tab-item" href="#/notifications">
				<i class="material-icons">notifications_active</i>
			</a>
		
			<a class="tab-item" href="#/friends">
				<i class="material-icons">group</i>
			</a>
		
			<a class="tab-item" href="#/profile">
				<i class="material-icons">person</i>
			</a>
		
			<a class="tab-item" href="#/settings">
				<i class="material-icons">settings</i>
			</a>

		</div>
	</div>

<ion-content class="pollsContent">

	<!-- Refresh page -->
	<ion-refresher
		on-refresh="onContentRefresh()"
		pulling-icon="ion-help-buoy"
		disable-pulling-rotation="true">
	</ion-refresher>

<div class="list">

	<!-- Active poll -->
	<div class="item item-avatar poll-animate" ng-class="{'overlay':poll.timeLeft === 0}" ng-repeat="poll in $root.data.polls track by $index">
		<img style="background:url({{poll.authorImage}}) no-repeat center;background-size:cover;">
		<h2 class="userName">{{poll.authorName}}</h2>
		<p class="asked">ASKED</p>
		<p class="timer">{{(poll.timeLeft !== 0) ? poll.timeLeft + ' MIN. LEFT' : 'EXPIRED'}}</p>
		<h2 class="pollQuestion">{{poll.question}}</h2>

		<!-- Poll image -->
		<div ng-class="{'imageContainer':poll.imageUrl !== '','imageContainerDefault':poll.imageUrl === ''}" style="background-image: url({{poll.imageUrl}});">
			<!-- Grey overlay -->
			<div class="yesGrey">
			<!-- Yes votes  -->
				<div class="yesContainer" style="width:{{poll.usersVotedYes + 0}}%">
					<p class="yes light">YES</p>
					<p class="yesNumber light">{{poll.usersVotedYes + 0}}</p>
					<p class="percent light">%</p>
					<img class="answeredIcon" src="img/answered.png">
				</div>
			</div>
			<!-- Grey overlay -->
			<div class="noGrey">
			<!-- No votes -->
				<div class="noContainer" style="width:{{poll.usersVotedNo + 0}}%">
					<p class="no">NO</p>
					<p class="noNumber">{{poll.usersVotedNo + 0}}</p>
					<p class="percent">%</p>
				</div>
			</div>
		</div>

		<a class="subdued pollVotes" ng-click="getPollItem(poll.questionId)">{{poll.usersVoted + 0}} VOTES</a>
		<a href="#/comments" class="subdued pollComments">24 COMMENTS</a>
		<a><i class="material-icons pollMore stable" ng-click="getPollItem(poll.questionId)">more_horiz</i></a>
	</div>

</div>



</ion-content>

<!-- Add poll footer -->
<ion-footer-bar align-title="left" class="bar-royal">
<!-- Add poll button -->
	<a href="#/addPoll"><h1 class="title addIcon"><i class="material-icons">add</i></h1></a>
</ion-footer-bar>

</ion-view>